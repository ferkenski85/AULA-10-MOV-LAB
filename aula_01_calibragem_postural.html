<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MOV LAB - Aula 01: Calibragem Postural</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            transition: all 0.3s ease;
            min-height: 44px;
            min-width: 44px;
        }
        
        .btn-primary:hover, .btn-primary:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(79, 172, 254, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #43e97b, #38f9d7);
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        .btn-success:hover, .btn-success:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(67, 233, 123, 0.3);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f6d365, #fda085);
            transition: all 0.3s ease;
            min-height: 44px;
        }

        .btn-warning:hover, .btn-warning:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(246, 211, 101, 0.3);
        }

        .btn-danger {
             background: linear-gradient(135deg, #ff6b6b, #ff8e53);
             transition: all 0.3s ease;
             min-height: 44px;
        }
        
        .btn-danger:hover, .btn-danger:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.3);
        }
        
        .btn-music {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        .btn-music:hover, .btn-music:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }
        
        .exercise-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .exercise-card:hover, .exercise-card:active {
            border-left-color: #a78bfa;
            transform: translateX(5px);
        }
        
        .exercise-card.active {
            border-left-color: #10b981;
            background: linear-gradient(135deg, #ecfdf5, #f0fdf4) !important;
            transform: translateX(5px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.2);
        }
        
        .timer-display {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 1.5rem;
            min-width: 80px;
            text-align: center;
        }
        
        .timer-display.active {
            color: #10b981;
            animation: timerPulse 1s infinite;
        }
        
        .timer-display.warning {
            color: #f59e0b;
            animation: timerPulse 0.5s infinite;
        }
        
        .timer-display.danger {
            color: #ef4444;
            animation: timerPulse 0.3s infinite;
        }
        
        @keyframes timerPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .floating-icon {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .phase-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .progress-bar {
            transition: width 1s ease-in-out;
        }
        
        .sound-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 16px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .sound-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .sound-indicator.start { background: #10b981; }
        .sound-indicator.end { background: #ef4444; }
        .sound-indicator.music { background: #8b5cf6; }
        
        .music-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
                
        .ios-audio-banner {
            position: fixed;
            top: 0; left: 0; right: 0;
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white; padding: 15px; text-align: center;
            z-index: 2000;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }
        
        .ios-audio-banner.show { transform: translateY(0); }
        
        .ios-audio-banner button {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white; padding: 10px 20px;
            border-radius: 25px; margin-top: 10px;
            font-weight: bold; min-height: 44px;
        }

    </style>
</head>
<body class="p-4 sm:p-6">

    <a href="#" class="absolute top-4 left-4 bg-white/80 backdrop-blur-sm text-gray-800 px-4 py-2 rounded-full shadow-lg flex items-center hover:bg-white transition z-10">
        <i class="fas fa-home mr-2"></i>
        <span>Voltar ao In√≠cio</span>
    </a>

    <!-- iOS Audio Activation Banner -->
    <div id="iosAudioBanner" class="ios-audio-banner">
        <div><i class="fas fa-volume-up mr-2"></i><strong>Ativar √Åudio</strong></div>
        <div class="text-sm mt-1">Toque no bot√£o abaixo para ativar os sons e m√∫sica de fundo</div>
        <button onclick="activateAudioForIOS()" id="activateAudioBtn"><i class="fas fa-play mr-2"></i>Ativar √Åudio</button>
    </div>

    <!-- Sound Indicator -->
    <div id="soundIndicator" class="sound-indicator">
        <i class="fas fa-volume-up mr-2"></i><span id="soundText"></span>
    </div>

    <!-- Music Controls -->
    <div class="music-controls">
        <button onclick="toggleBackgroundMusic()" id="musicBtn" class="btn-music text-white px-4 py-2 rounded-full"><i class="fas fa-music mr-2"></i>M√∫sica</button>
        <button onclick="adjustVolume(-0.1)" class="btn-primary text-white px-3 py-2 rounded-full"><i class="fas fa-volume-down"></i></button>
        <button onclick="adjustVolume(0.1)" class="btn-primary text-white px-3 py-2 rounded-full"><i class="fas fa-volume-up"></i></button>
    </div>

    <!-- Hidden audio elements -->
    <audio id="backgroundMusic" loop preload="auto" style="display: none;"><source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav"></audio>
    <audio id="startSound" preload="auto" style="display: none;"><source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav"></audio>
    <audio id="endSound" preload="auto" style="display: none;"><source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1f
dJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav"></audio>

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="glass-effect rounded-3xl p-6 sm:p-8 mb-6 text-center">
            <div class="floating-icon text-6xl mb-4">ü§∏‚Äç‚ôÇÔ∏è</div>
            <h1 class="text-3xl sm:text-4xl font-bold phase-header mb-2">Acervo MOV LAB - Aula 01</h1>
            <h2 class="text-2xl sm:text-3xl font-semibold text-gray-800 mb-4">"Calibragem Postural: Do Cr√¢nio ao Calc√¢neo"</h2>
            <div class="flex flex-wrap justify-center gap-4 text-lg text-gray-600">
                <div class="flex items-center"><i class="fas fa-running mr-2 text-indigo-500"></i>Material: Nenhum (Peso Corporal)</div>
                <div class="flex items-center"><i class="fas fa-clock mr-2 text-purple-500"></i>15 minutos</div>
                <div class="flex items-center"><i class="fas fa-bullseye mr-2 text-blue-500"></i>Foco: Reset Neuromuscular</div>
            </div>
            <div class="mt-6 p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border-l-4 border-indigo-400">
                <p class="text-gray-700 italic"><strong>Foco:</strong> Reestabelecer a comunica√ß√£o neural e a mobilidade desde as v√©rtebras cervicais at√© a f√°scia plantar, para que sintam o corpo de uma forma diferente.</p>
            </div>
            
            <div class="mt-6 flex justify-center space-x-2 sm:space-x-4 flex-wrap">
                <button onclick="startAllTimers()" class="btn-success text-white px-6 py-3 rounded-full mb-2"><i class="fas fa-play mr-2"></i>Iniciar Aula</button>
                <button onclick="pauseAllTimers()" class="btn-warning text-white px-6 py-3 rounded-full mb-2"><i class="fas fa-pause mr-2"></i>Pausar Tudo</button>
                <button onclick="resetAllTimers()" class="btn-danger text-white px-6 py-3 rounded-full mb-2"><i class="fas fa-redo mr-2"></i>Reiniciar Tudo</button>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="glass-effect rounded-xl p-4 mb-6">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-semibold text-gray-700">Progresso da Aula</span>
                <span class="text-sm font-semibold text-gray-700" id="progressText">0%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3"><div class="progress-bar bg-gradient-to-r from-green-400 to-blue-500 h-3 rounded-full" id="progressBar" style="width: 0%"></div></div>
        </div>

        <!-- Fases -->
        <!-- FASE 1 -->
        <div class="glass-effect rounded-3xl p-6 mb-6">
            <h3 class="text-2xl font-bold text-gray-800 flex items-center mb-6"><i class="fas fa-power-off text-green-500 mr-3"></i>FASE 1 - CONEX√ÉO E PARTIDA (1 min)</h3>
            <div class="exercise-card bg-white p-6 rounded-xl" id="exercise-0">
                <div class="flex justify-between items-start flex-wrap gap-4">
                    <h4 class="text-xl font-semibold text-gray-800">1. O Fio Invis√≠vel com Respira√ß√£o Tridimensional</h4>
                    <div class="flex items-center space-x-3">
                        <div class="timer-display text-green-600" id="timer-0">01:00</div>
                        <button onclick="startExerciseTimer(0, 60)" class="btn-primary text-white px-3 py-2 rounded-lg"><i class="fas fa-play"></i></button>
                        <button onclick="pauseExerciseTimer(0)" class="bg-gray-500 text-white px-3 py-2 rounded-lg hover:bg-gray-600"><i class="fas fa-pause"></i></button>
                    </div>
                </div>
                <p class="text-gray-700 my-3"><strong>Movimento:</strong> P√©s na largura do quadril, m√£os nas costelas. Inspire empurrando as m√£os para os lados. Expire sentindo as costelas se fecharem e o "fio" te puxar para cima.</p>
                <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500"><p class="text-green-700 italic">"Sejam bem-vindos √† 'Calibragem Postural'. Come√ßamos criando espa√ßo. Sintam as costelas se expandindo como um bal√£o em 3D."</p></div>
            </div>
        </div>

        <!-- FASE 2 -->
        <div class="glass-effect rounded-3xl p-6 mb-6">
            <h3 class="text-2xl font-bold text-gray-800 flex items-center mb-6"><i class="fas fa-cogs text-blue-500 mr-3"></i>FASE 2 - FLUXO DIRECIONAL DE CALIBRAGEM (12 min)</h3>
            
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-1"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">2. [CABE√áA & PESCO√áO] Libera√ß√£o Ativa do Trap√©zio</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> Incline a cabe√ßa para a direita, use os dedos da m√£o direita para pressionar o trap√©zio esquerdo e mova a cabe√ßa lentamente para frente e tr√°s. Troque o lado.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-1">01:20</div><button onclick="startExerciseTimer(1, 80)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(1)"><i class="fas fa-pause"></i></button></div></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-2"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">3. [OMBROS] Flossing Escapular ("O Arqueiro")</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> Bra√ßo esquerdo estendido. Puxe uma "corda de arco" imagin√°ria com o bra√ßo direito, unindo a esc√°pula direita √† coluna e olhando para tr√°s. Troque os lados.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-2">01:20</div><button onclick="startExerciseTimer(2, 80)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(2)"><i class="fas fa-pause"></i></button></div></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-3"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">4. [BRA√áOS & PUNHOS] A Espiral do Antebra√ßo</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> Bra√ßo estendido. Gire para fora flexionando o punho para cima. Retorne e gire para dentro flexionando o punho para baixo. Cont√≠nuo e fluido. Troque o bra√ßo.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-3">01:20</div><button onclick="startExerciseTimer(3, 80)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(3)"><i class="fas fa-pause"></i></button></div></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-4"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">5. [COSTAS & TRONCO] Gato Arrepiado com Rota√ß√£o</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> Execute o "Gato-Vaca". Na fase "Gato", pare e eleve o bra√ßo direito ao teto. Retorne, fa√ßa a "Vaca", pare e repita a eleva√ß√£o. Troque o bra√ßo.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-4">01:20</div><button onclick="startExerciseTimer(4, 80)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(4)"><i class="fas fa-pause"></i></button></div></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-5"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">6. [COSTAS & TRONCO] Enrolamento com Balan√ßo Pendular</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> A partir da cabe√ßa, des√ßa lentamente (roll down). Solte a cabe√ßa/bra√ßos e realize um balan√ßo suave com o tronco de um lado para o outro.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-5">01:00</div><button onclick="startExerciseTimer(5, 60)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(5)"><i class="fas fa-pause"></i></button></div></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-6"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">7. [QUADRIL] Agachamento Cossaco Din√¢mico</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> P√©s afastados, flexione um joelho projetando o quadril para tr√°s e mantendo a outra perna esticada. Alterne de um lado para o outro fluidamente.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-6">01:10</div><button onclick="startExerciseTimer(6, 70)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(6)"><i class="fas fa-pause"></i></button></div></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-7"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">8. [QUADRIL] Figura 4 Din√¢mica</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> Equilibrado em um p√©, coloque o tornozelo oposto sobre o joelho. Agache lentamente, projetando o quadril para tr√°s. Suba e des√ßa. Troque a perna.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-7">01:10</div><button onclick="startExerciseTimer(7, 70)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(7)"><i class="fas fa-pause"></i></button></div></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-8"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">9. [PERNAS] Agachamento com Abdu√ß√£o</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> Na subida de um agachamento, eleve lateralmente a perna direita esticada. Des√ßa para outro agachamento e, na subida, eleve a perna esquerda.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-8">01:00</div><button onclick="startExerciseTimer(8, 60)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(8)"><i class="fas fa-pause"></i></button></div></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-9"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">10. [P√âS] O Acorde√£o Podal</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> Fique na ponta dos p√©s o mais alto poss√≠vel. Des√ßa controlado e, sem parar, levante a ponta dos p√©s, apoiando-se nos calcanhares.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-9">01:00</div><button onclick="startExerciseTimer(9, 60)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(9)"><i class="fas fa-pause"></i></button></div></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-10"><div class="flex-wrapper"><div class="text-content"><h5 class="text-lg font-semibold text-gray-800">11. [INTEGRA√á√ÉO GLOBAL] Desenrolar com Alcance</h5><p class="text-gray-700 my-3"><strong>Movimento:</strong> Flexione o quadril, toque o ch√£o e suba desenrolando a coluna, v√©rtebra por v√©rtebra. No topo, inspire e alcance o teto, finalizando com uma leve extens√£o.</p></div><div class="controls"><div class="timer-display text-blue-600" id="timer-10">01:00</div><button onclick="startExerciseTimer(10, 60)"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(10)"><i class="fas fa-pause"></i></button></div></div></div>
        </div>

        <!-- FASE 3 -->
        <div class="glass-effect rounded-3xl p-6 mb-6">
            <h3 class="text-2xl font-bold text-gray-800 flex items-center mb-6"><i class="fas fa-star text-purple-500 mr-3"></i>FASE 3 - INTEGRA√á√ÉO FINAL (2 min)</h3>
            <div class="exercise-card bg-white p-6 rounded-xl" id="exercise-11">
                 <div class="flex justify-between items-start flex-wrap gap-4">
                    <h4 class="text-xl font-semibold text-gray-800">12. Percep√ß√£o e Encerramento</h4>
                     <div class="flex items-center space-x-3">
                        <div class="timer-display text-purple-600" id="timer-11">02:00</div>
                        <button onclick="startExerciseTimer(11, 120)" class="btn-primary text-white px-3 py-2 rounded-lg"><i class="fas fa-play"></i></button>
                        <button onclick="pauseExerciseTimer(11)" class="bg-gray-500 text-white px-3 py-2 rounded-lg hover:bg-gray-600"><i class="fas fa-pause"></i></button>
                    </div>
                </div>
                <p class="text-gray-700 my-3"><strong>Movimento:</strong> Retorne √† posi√ß√£o neutra, feche os olhos e simplesmente perceba as sensa√ß√µes no corpo, da cabe√ßa aos p√©s, pelo tempo indicado.</p>
                 <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500"><p class="text-purple-700 italic">"Respirem. Sintam a diferen√ßa de como o corpo se sentia h√° 15 minutos e como ele se sente agora. Mais longo, mais conectado, mais vivo. Parab√©ns!"</p></div>
            </div>
        </div>


        <!-- Resumo da Aula -->
        <div class="glass-effect rounded-3xl p-6">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center"><i class="fas fa-chart-bar text-indigo-500 mr-3"></i>Resumo da Sess√£o</h3>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl"><h4 class="text-lg font-semibold text-gray-800 mb-4"><i class="fas fa-stopwatch text-blue-500 mr-3"></i>Tempo por Fase</h4><div class="space-y-2"><div class="flex justify-between"><span>Fase 1 - Conex√£o:</span><span class="font-semibold text-green-600">1 min</span></div><div class="flex justify-between"><span>Fase 2 - Calibragem:</span><span class="font-semibold text-blue-600">12 min</span></div><div class="flex justify-between"><span>Fase 3 - Integra√ß√£o:</span><span class="font-semibold text-purple-600">2 min</span></div><hr class="my-2"><div class="flex justify-between text-lg font-bold"><span>Total:</span><span class="text-indigo-600">15 minutos</span></div></div></div>
                <div class="bg-white p-6 rounded-xl"><h4 class="text-lg font-semibold text-gray-800 mb-4"><i class="fas fa-bullseye text-red-500 mr-3"></i>Objetivos da Aula</h4><ul class="space-y-2 list-inside"><li><i class="fas fa-check text-green-500 mr-2"></i>Reset neuromuscular</li><li><i class="fas fa-check text-blue-500 mr-2"></i>Reestabelecer comunica√ß√£o neural</li><li><i class="fas fa-check text-purple-500 mr-2"></i>Melhorar a mobilidade global</li><li><i class="fas fa-check text-indigo-500 mr-2"></i>Aumentar a consci√™ncia corporal</li></ul></div>
            </div>
        </div>
    </div>
    
    <!-- CSS Adicional para Estrutura Interna dos Cards de Exerc√≠cio -->
    <style>
        .flex-wrapper { display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 1rem; }
        .text-content { flex: 1 1 300px; }
        .controls { display: flex; align-items: center; gap: 0.75rem; }
        .controls button { border-radius: 0.5rem; padding: 0.5rem 0.75rem; }
    </style>
    
    <script>
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        let audioContext = null; let backgroundMusicOscillator = null; let backgroundMusicGain = null;
        let musicPlaying = false; let musicVolume = 0.05; let audioInitialized = false;
        let backgroundMusicElement = null; let startSoundElement = null; let endSoundElement = null;
        let timers = {}; let currentExercise = -1; let completedExercises = 0;
        const totalExercises = 12;
        // Fase 1(60) + Fase 2(80+80+80+80+60+70+70+60+60+60=720) + Fase 3(120) = 900s = 15min
        const exerciseDurations = [60, 80, 80, 80, 80, 60, 70, 70, 60, 60, 60, 120];

        function initializeAudio() {
            if (audioInitialized) return;
            try { audioContext = new (window.AudioContext || window.webkitAudioContext)(); } catch (e) { console.log('Web Audio API not available'); }
            backgroundMusicElement = document.getElementById('backgroundMusic');
            startSoundElement = document.getElementById('startSound');
            endSoundElement = document.getElementById('endSound');
            if (backgroundMusicElement) backgroundMusicElement.volume = musicVolume;
            if (startSoundElement) startSoundElement.volume = 0.3;
            if (endSoundElement) endSoundElement.volume = 0.3;
            audioInitialized = true;
            if (isIOS) document.getElementById('iosAudioBanner').classList.remove('show');
        }

        function activateAudioForIOS() {
            initializeAudio();
            if (audioContext && audioContext.state === 'suspended') { audioContext.resume(); }
            if (backgroundMusicElement) { backgroundMusicElement.play().then(() => { backgroundMusicElement.pause(); backgroundMusicElement.currentTime = 0; }).catch(e => {}); }
            document.getElementById('iosAudioBanner').classList.remove('show');
            showSoundIndicator('√Åudio Ativado', 'music');
        }

        function toggleBackgroundMusic() {
            if (!audioInitialized) initializeAudio();
            const musicBtn = document.getElementById('musicBtn');
            if (!musicPlaying) {
                let musicStarted = false;
                if (backgroundMusicElement) { try { backgroundMusicElement.play(); musicStarted = true; } catch (e) {} }
                if(musicStarted) {
                    musicPlaying = true;
                    musicBtn.innerHTML = '<i class="fas fa-pause mr-2"></i>Pausar';
                    showSoundIndicator('M√∫sica Iniciada', 'music');
                }
            } else {
                if (backgroundMusicElement) { backgroundMusicElement.pause(); backgroundMusicElement.currentTime = 0; }
                musicPlaying = false;
                musicBtn.innerHTML = '<i class="fas fa-music mr-2"></i>M√∫sica';
                showSoundIndicator('M√∫sica Pausada', 'music');
            }
        }
        function adjustVolume(delta) {
            musicVolume = Math.max(0, Math.min(0.3, musicVolume + delta));
            if (backgroundMusicElement) backgroundMusicElement.volume = musicVolume;
            showSoundIndicator(`Volume: ${Math.round(musicVolume * 100)}%`, 'music');
        }
        function playSound(type) {
            if (!audioInitialized) return;
            const soundElement = type === 'start' ? startSoundElement : endSoundElement;
            if (soundElement) {
                soundElement.currentTime = 0;
                soundElement.play().catch(e => {});
            }
        }
        function showSoundIndicator(text, type) {
            const indicator = document.getElementById('soundIndicator');
            indicator.querySelector('span').textContent = text;
            indicator.className = `sound-indicator show ${type}`;
            setTimeout(() => indicator.classList.remove('show'), 2000);
        }
        function formatTime(seconds) { const m = Math.floor(seconds / 60); const s = seconds % 60; return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`; }
        function updateTimerDisplay(id, timeLeft) {
            const el = document.getElementById(`timer-${id}`);
            if (el) {
                el.textContent = formatTime(timeLeft);
                el.classList.remove('active', 'warning', 'danger');
                if (timeLeft > 0 && timers[id]) el.classList.add('active');
                if (timeLeft <= 10) el.classList.add('warning');
                if (timeLeft <= 5) el.classList.add('danger');
            }
        }

        function startExerciseTimer(id, duration) {
            if (!audioInitialized) initializeAudio();
            if (timers[id]) clearInterval(timers[id]);
            let timeLeft = duration;
            currentExercise = id;
            document.querySelectorAll('.exercise-card').forEach(c => c.classList.remove('active'));
            document.getElementById(`exercise-${id}`).classList.add('active');
            playSound('start');
            showSoundIndicator(`Iniciando Ex. #${id + 1}`, 'start');
            updateTimerDisplay(id, timeLeft);

            timers[id] = setInterval(() => {
                timeLeft--;
                updateTimerDisplay(id, timeLeft);
                if (timeLeft <= 0) {
                    clearInterval(timers[id]);
                    delete timers[id];
                    playSound('end');
                    showSoundIndicator(`Ex. #${id + 1} Finalizado`, 'end');
                    document.getElementById(`exercise-${id}`).classList.remove('active');
                    completedExercises++;
                    updateProgress();

                    const isRunningAll = document.body.dataset.runningAll === 'true';
                    if (isRunningAll && id < totalExercises - 1) {
                        setTimeout(() => startExerciseTimer(id + 1, exerciseDurations[id + 1]), 1500);
                    } else if (isRunningAll && id === totalExercises - 1) {
                        showSoundIndicator('Aula Finalizada!', 'end');
                        document.body.dataset.runningAll = 'false';
                        currentExercise = -1;
                    }
                }
            }, 1000);
        }

        function pauseExerciseTimer(id) {
            if (timers[id]) {
                clearInterval(timers[id]);
                delete timers[id];
                document.getElementById(`exercise-${id}`).classList.remove('active');
                updateTimerDisplay(id, parseInt(document.getElementById(`timer-${id}`).textContent.split(':')[0])*60 + parseInt(document.getElementById(`timer-${id}`).textContent.split(':')[1]));
                showSoundIndicator('Exerc√≠cio Pausado', 'end');
            }
        }
        function startAllTimers() {
            resetAllTimers(false);
            document.body.dataset.runningAll = 'true';
            completedExercises = 0;
            updateProgress();
            startExerciseTimer(0, exerciseDurations[0]);
            showSoundIndicator('Iniciando Aula Completa', 'start');
        }
        function pauseAllTimers() {
            document.body.dataset.runningAll = 'false';
            Object.keys(timers).forEach(id => pauseExerciseTimer(parseInt(id)));
            currentExercise = -1;
            showSoundIndicator('Todos os Timers Pausados', 'end');
        }
        function resetAllTimers(showAlert = true) {
            pauseAllTimers();
            exerciseDurations.forEach((duration, index) => {
                 const timerEl = document.getElementById(`timer-${index}`);
                 if (timerEl) {
                     timerEl.textContent = formatTime(duration);
                     timerEl.classList.remove('active', 'warning', 'danger');
                 }
            });
            completedExercises = 0;
            updateProgress();
            if (showAlert) showSoundIndicator('Aula Reiniciada', 'music');
        }
        function updateProgress() {
            const percent = (completedExercises / totalExercises) * 100;
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            if(progressBar) progressBar.style.width = `${percent}%`;
            if(progressText) progressText.textContent = `${Math.round(percent)}%`;
        }

        document.addEventListener('DOMContentLoaded', function() {
             if (isIOS) setTimeout(() => document.getElementById('iosAudioBanner').classList.add('show'), 1000);
             else initializeAudio();

             // Script para simplificar a estrutura interna dos cards, mantendo a interatividade
            document.querySelectorAll('.exercise-card .controls').forEach(controlsEl => {
                const card = controlsEl.parentElement.parentElement;
                controlsEl.querySelectorAll('button').forEach(btn => {
                    btn.className = 'btn-primary text-white px-3 py-2 rounded-lg text-sm';
                    if (btn.innerHTML.includes('fa-pause')) {
                        btn.classList.remove('btn-primary');
                        btn.classList.add('bg-gray-500', 'hover:bg-gray-600');
                    }
                });
                card.querySelector('.flex-wrapper').appendChild(controlsEl);
            });
        });
    </script>
</body>
</html>
