<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MOV LAB - Aula 02: Conex√£o Fina</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            transition: all 0.3s ease;
            min-height: 44px; /* iOS touch target */
            min-width: 44px;
        }
        
        .btn-primary:hover, .btn-primary:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            transition: all 0.3s ease;
            min-height: 44px;
            min-width: 44px;
        }
        
        .btn-secondary:hover, .btn-secondary:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(79, 172, 254, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #43e97b, #38f9d7);
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        .btn-success:hover, .btn-success:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(67, 233, 123, 0.3);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #fa709a, #fee140);
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        .btn-warning:hover, .btn-warning:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(250, 112, 154, 0.3);
        }
        
        .btn-music {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        .btn-music:hover, .btn-music:active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }
        
        .exercise-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .exercise-card:hover, .exercise-card:active {
            border-left-color: #ff6b6b;
            transform: translateX(5px);
        }
        
        .exercise-card.active {
            border-left-color: #10b981;
            background: linear-gradient(135deg, #ecfdf5, #f0fdf4) !important;
            transform: translateX(5px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.2);
        }
        
        .timer-display {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 1.5rem;
            min-width: 80px;
            text-align: center;
        }
        
        .timer-display.active {
            color: #10b981;
            animation: timerPulse 1s infinite;
        }
        
        .timer-display.warning {
            color: #f59e0b;
            animation: timerPulse 0.5s infinite;
        }
        
        .timer-display.danger {
            color: #ef4444;
            animation: timerPulse 0.3s infinite;
        }
        
        @keyframes timerPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .floating-icon {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .phase-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .progress-bar {
            transition: width 1s ease-in-out;
        }
        
        .sound-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 16px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .sound-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .sound-indicator.start { background: #10b981; }
        .sound-indicator.end { background: #ef4444; }
        .sound-indicator.music { background: #8b5cf6; }
        
        .music-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .ios-audio-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            padding: 15px;
            text-align: center;
            z-index: 2000;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }
        
        .ios-audio-banner.show {
            transform: translateY(0);
        }
        
        .ios-audio-banner button {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            margin-top: 10px;
            font-weight: bold;
            min-height: 44px;
        }
        
        @media print {
            body { background: white !important; font-size: 12px; }
            .glass-effect { background: white !important; box-shadow: none !important; border: 1px solid #e5e7eb !important; }
            .btn-primary, .btn-secondary, .btn-success, .btn-warning, .btn-music { background: #6b7280 !important; color: white !important; -webkit-print-color-adjust: exact; }
            .floating-icon { animation: none !important; }
            .sound-indicator, .music-controls, .ios-audio-banner { display: none !important; }
        }
        
        @media screen and (min-width: 768px) and (max-width: 1024px) {
            .music-controls { bottom: 30px; right: 30px; }
            .timer-display { font-size: 1.75rem; }
            .btn-primary, .btn-secondary, .btn-success, .btn-warning, .btn-music { min-height: 50px; padding: 12px 20px; }
        }
    </style>
</head>
<body class="p-4">
    <!-- iOS Audio Activation Banner -->
    <div id="iosAudioBanner" class="ios-audio-banner">
        <div><i class="fas fa-volume-up mr-2"></i><strong>Ativar √Åudio</strong></div>
        <div class="text-sm mt-1">Toque no bot√£o abaixo para ativar os sons e m√∫sica de fundo</div>
        <button onclick="activateAudioForIOS()" id="activateAudioBtn"><i class="fas fa-play mr-2"></i>Ativar √Åudio</button>
    </div>

    <!-- Sound Indicator -->
    <div id="soundIndicator" class="sound-indicator">
        <i class="fas fa-volume-up mr-2"></i>
        <span id="soundText">Iniciando Exerc√≠cio</span>
    </div>

    <!-- Music Controls -->
    <div class="music-controls">
        <button onclick="toggleBackgroundMusic()" id="musicBtn" class="btn-music text-white px-4 py-2 rounded-full"><i class="fas fa-music mr-2"></i>M√∫sica</button>
        <button onclick="adjustVolume(-0.1)" class="btn-secondary text-white px-3 py-2 rounded-full"><i class="fas fa-volume-down"></i></button>
        <button onclick="adjustVolume(0.1)" class="btn-secondary text-white px-3 py-2 rounded-full"><i class="fas fa-volume-up"></i></button>
    </div>

    <!-- Hidden audio elements for iOS fallback -->
    <audio id="backgroundMusic" loop preload="auto" style="display: none;"><source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav"></audio>
    <audio id="startSound" preload="auto" style="display: none;"><source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav"></audio>
    <audio id="endSound" preload="auto" style="display: none;"><source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1dJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav"></audio>

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="glass-effect rounded-3xl p-8 mb-6 text-center">
            <div class="floating-icon text-6xl mb-4">üß†</div>
            <h1 class="text-4xl font-bold phase-header mb-2">Acervo MOV LAB - Aula 02</h1>
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">"Conex√£o Fina: Das Retinas aos Metacarpos"</h2>
            <div class="flex flex-wrap justify-center gap-4 text-lg text-gray-600">
                <div class="flex items-center"><i class="fas fa-dumbbell mr-2 text-green-500"></i>Material: Nenhum</div>
                <div class="flex items-center"><i class="fas fa-clock mr-2 text-purple-500"></i>15 minutos</div>
                <div class="flex items-center"><i class="fas fa-eye mr-2 text-blue-500"></i>Neuro-sensorial</div>
            </div>
            <div class="mt-6 p-4 bg-blue-50 rounded-xl border-l-4 border-blue-500">
                <p class="text-gray-700 italic"><strong>Foco:</strong> Uma sess√£o neuro-sensorial para queixas em olhos e punhos, tratando-os como um sistema integrado com a coluna cervical e ombros para um al√≠vio atrav√©s da precis√£o do movimento.</p>
            </div>
            
            <div class="mt-6 flex justify-center space-x-4 flex-wrap">
                <button onclick="startAllTimers()" class="btn-success text-white px-6 py-3 rounded-full mb-2"><i class="fas fa-play mr-2"></i>Iniciar Aula Completa</button>
                <button onclick="pauseAllTimers()" class="btn-warning text-white px-6 py-3 rounded-full mb-2"><i class="fas fa-pause mr-2"></i>Pausar Tudo</button>
                <button onclick="resetAllTimers()" class="btn-primary text-white px-6 py-3 rounded-full mb-2"><i class="fas fa-redo mr-2"></i>Reiniciar Tudo</button>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="glass-effect rounded-xl p-4 mb-6">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-semibold text-gray-700">Progresso da Aula</span>
                <span class="text-sm font-semibold text-gray-700" id="progressText">0%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
                <div class="progress-bar bg-gradient-to-r from-green-400 via-blue-400 to-purple-500 h-3 rounded-full" id="progressBar" style="width: 0%"></div>
            </div>
        </div>

        <!-- Fase 1 - Conex√£o Inicial -->
        <div class="glass-effect rounded-3xl p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-800 flex items-center"><i class="fas fa-play-circle text-green-500 mr-3"></i>FASE 1 - CONEX√ÉO INICIAL</h3>
                <div class="text-sm text-gray-600">Dura√ß√£o: 1 minuto</div>
            </div>
            
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-0">
                <div class="flex justify-between items-start mb-4">
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">Ativa√ß√£o Oculomotora e Cervical</h4>
                    <div class="flex items-center space-x-3">
                        <div class="timer-display text-green-600" id="timer-0">01:00</div>
                        <button onclick="startExerciseTimer(0, 60)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button>
                        <button onclick="pauseExerciseTimer(0)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button>
                    </div>
                </div>
                <p class="text-gray-700 mb-4">Cabe√ßa parada, olhar para o teto e depois para o ch√£o, 3x. Olhar para a direita e para a esquerda, 3x. Agora, fa√ßa uma lenta rota√ß√£o do pesco√ßo, sentindo se o movimento est√° mais livre.</p>
                <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                    <h5 class="font-semibold text-blue-800 mb-2"><i class="fas fa-microphone mr-2"></i>Script MOV LAB:</h5>
                    <p class="text-blue-700 italic">"Sejam bem-vindos √† nossa segunda sess√£o, a 'Conex√£o Fina'. Existe uma via expressa neural entre os m√∫sculos que movem seus olhos e os que estabilizam seu pesco√ßo. Hoje, vamos otimizar essa via para um al√≠vio mais profundo."</p>
                </div>
            </div>
        </div>

        <!-- Fase 2 - Fluxo Direcional de Precis√£o -->
        <div class="glass-effect rounded-3xl p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-800 flex items-center"><i class="fas fa-crosshairs text-indigo-500 mr-3"></i>FASE 2 - FLUXO DIRECIONAL DE PRECIS√ÉO</h3>
                <div class="text-sm text-gray-600">Dura√ß√£o: 12 minutos</div>
            </div>

            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-1"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">1</span>[CABE√áA & PESCO√áO] Deslizamento do Nervo Cervical</span><div class="flex items-center space-x-3"><div class="timer-display text-blue-600" id="timer-1">01:15</div><button onclick="startExerciseTimer(1, 75)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(1)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">Em p√©, incline a cabe√ßa para a direita. Ao mesmo tempo, estenda o bra√ßo esquerdo para o lado e para baixo, flexionando o punho (dedos para cima). Inverta: traga a cabe√ßa ao centro enquanto relaxa a m√£o. Repita de forma r√≠tmica. Trocar o lado.</p><div class="bg-green-50 p-3 rounded-lg"><p class="text-green-700"><strong>Script:</strong> "Isto n√£o √© um alongamento muscular, √© uma 'limpeza de nervos', fazendo os nervos do seu pesco√ßo deslizarem suavemente."</p></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-2"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">2</span>[OLHOS] A Caixa Visual</span><div class="flex items-center space-x-3"><div class="timer-display text-blue-600" id="timer-2">01:15</div><button onclick="startExerciseTimer(2, 75)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(2)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">Cabe√ßa parada. Imagine uma grande caixa √† sua frente. Olhe para o canto superior esquerdo por 3s, depois superior direito, inferior direito, inferior esquerdo. Retorne ao centro e inverta a dire√ß√£o.</p><div class="bg-green-50 p-3 rounded-lg"><p class="text-green-700"><strong>Script:</strong> "Estamos treinando a amplitude completa dos m√∫sculos oculares, combatendo a fadiga do 'foco fixo' na tela."</p></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-3"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">3</span>[OMBROS] Rota√ß√£o Glenoumeral "Desatarraxar"</span><div class="flex items-center space-x-3"><div class="timer-display text-blue-600" id="timer-3">01:15</div><button onclick="startExerciseTimer(3, 75)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(3)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">Cotovelo direito flexionado a 90 graus, colado ao corpo. Rota√ß√£o externa (m√£o para fora) e rota√ß√£o interna (m√£o para a barriga). O movimento vem do ombro. Trocar o bra√ßo.</p><div class="bg-green-50 p-3 rounded-lg"><p class="text-green-700"><strong>Script:</strong> "Estamos lubrificando a articula√ß√£o do ombro em sua fun√ß√£o rotacional, vital para a sa√∫de do manguito rotador."</p></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-4"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">4</span>[BRA√áOS & PUNHOS] "A Onda da M√£o" (Fist Waves)</span><div class="flex items-center space-x-3"><div class="timer-display text-blue-600" id="timer-4">01:15</div><button onclick="startExerciseTimer(4, 75)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(4)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">M√£os em posi√ß√£o de prece. Des√ßa as m√£os unidas at√© sentir o alongamento nos punhos. Em seguida, eleve-as, desfazendo a "prece" e fechando os punhos, estendendo-os para frente. Movimento fluido.</p></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-5"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">5</span>[BRA√áOS & PUNHOS] Deslizamento dos Tend√µes Flexores</span><div class="flex items-center space-x-3"><div class="timer-display text-blue-600" id="timer-5">01:15</div><button onclick="startExerciseTimer(5, 75)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(5)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">Bra√ßo estendido. Sequ√™ncia: 1-M√£o aberta; 2-"Garra"; 3-"Mesa" (dedos a 90 graus); 4-Punho suave; 5-Punho fechado. Movimento lento. Trocar a m√£o.</p><div class="bg-green-50 p-3 rounded-lg"><p class="text-green-700"><strong>Script:</strong> "Esses exerc√≠cios previnem a s√≠ndrome do t√∫nel do carpo, garantindo que os tend√µes se movam livremente."</p></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-6"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">6</span>[COSTAS & TRONCO] O "Abridor de Livros" (Open Book)</span><div class="flex items-center space-x-3"><div class="timer-display text-blue-600" id="timer-6">01:15</div><button onclick="startExerciseTimer(6, 75)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(6)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">M√£os unidas √† frente do peito. Gire o tronco para a direita, abrindo o bra√ßo direito como se estivesse abrindo um livro. O olhar acompanha a m√£o. Retorne e troque o lado.</p><div class="bg-green-50 p-3 rounded-lg"><p class="text-green-700"><strong>Script:</strong> "Este movimento foca na rota√ß√£o da coluna tor√°cica, aliviando a sobrecarga na lombar e na cervical."</p></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-7"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">7</span>[COSTAS & TRONCO] Inclina√ß√£o Hinge com Alcance Oposto</span><div class="flex items-center space-x-3"><div class="timer-display text-blue-600" id="timer-7">01:00</div><button onclick="startExerciseTimer(7, 60)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(7)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">P√©s na largura do quadril. Incline o tronco para frente com a coluna reta (Hip Hinge). Com o tronco paralelo ao ch√£o, alcance com a m√£o direita o p√© esquerdo. Retorne e alterne.</p></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-8"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">8</span>[QUADRIL] O P√™ndulo P√©lvico (Estabilidade Unipodal)</span><div class="flex items-center space-x-3"><div class="timer-display text-blue-600" id="timer-8">01:15</div><button onclick="startExerciseTimer(8, 75)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(8)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">Apoie-se no p√© esquerdo, joelho destravado. Perna direita esticada √† frente. Fa√ßa um "tique-taque" com a perna de um lado para o outro, mantendo a pelve e o tronco im√≥veis. Trocar a perna.</p><div class="bg-green-50 p-3 rounded-lg"><p class="text-green-700"><strong>Script:</strong> "O desafio n√£o √© balan√ßar a perna, mas manter a pelve est√°vel. Isso fortalece o gl√∫teo m√©dio, o principal estabilizador da sua bacia."</p></div></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-9"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">9</span>[PERNAS & P√âS] Espiral Ascendente</span><div class="flex items-center space-x-3"><div class="timer-display text-blue-600" id="timer-9">01:15</div><button onclick="startExerciseTimer(9, 75)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(9)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">Agache um pouco. Suba desenrolando e girando o corpo para a direita, terminando na ponta dos p√©s com os bra√ßos apontando para a diagonal superior direita. Volte e repita para a esquerda.</p></div>
            <div class="exercise-card bg-white p-6 rounded-xl mb-4" id="exercise-10"><h5 class="text-lg font-semibold text-gray-800 flex items-center justify-between"><span><span class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">10</span>[INTEGRA√á√ÉO GLOBAL] Tremor Terap√™utico</span><div class="flex items-center space-x-3"><div class="timer-display text-purple-600" id="timer-10">01:00</div><button onclick="startExerciseTimer(10, 60)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button><button onclick="pauseExerciseTimer(10)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button></div></h5><p class="text-gray-700 my-3">Pernas relaxadas, joelhos soltos. Inicie um tremor suave que sobe das pernas, passa pelo quadril e chega aos ombros, soltando toda a tens√£o residual.</p></div>
        </div>

        <!-- Fase 3 - Integra√ß√£o Final -->
        <div class="glass-effect rounded-3xl p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-800 flex items-center"><i class="fas fa-check-circle text-green-500 mr-3"></i>FASE 3 - INTEGRA√á√ÉO FINAL</h3>
                <div class="text-sm text-gray-600">Dura√ß√£o: 2 minutos</div>
            </div>
            
            <div class="exercise-card bg-white p-6 rounded-xl" id="exercise-11">
                <div class="flex justify-between items-start mb-4">
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">Recalibra√ß√£o do Sistema Nervoso</h4>
                    <div class="flex items-center space-x-3">
                        <div class="timer-display text-green-600" id="timer-11">02:00</div>
                        <button onclick="startExerciseTimer(11, 120)" class="btn-primary text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-play"></i></button>
                        <button onclick="pauseExerciseTimer(11)" class="bg-gray-500 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-pause"></i></button>
                    </div>
                </div>
                <p class="text-gray-700 mb-4">Parar o tremor. Ficar im√≥vel por 30 segundos, sentindo o "eco" do movimento no corpo. Tr√™s respira√ß√µes calmas.</p>
                <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                    <h5 class="font-semibold text-purple-800 mb-2"><i class="fas fa-microphone mr-2"></i>Script Final:</h5>
                    <p class="text-purple-700 italic">"Sintam a vibra√ß√£o e o formigamento. Isso √© o seu sistema nervoso se recalibrando. Voc√™s acabaram de completar a 'Conex√£o Fina'. Parab√©ns pela concentra√ß√£o."</p>
                </div>
            </div>
        </div>

        <!-- Resumo da Aula -->
        <div class="glass-effect rounded-3xl p-6">
            <h3 class="text-2xl font-bold text-gray-800 mb-6"><i class="fas fa-chart-bar text-indigo-500 mr-3"></i>Resumo da Sess√£o</h3>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4"><i class="fas fa-stopwatch text-blue-500 mr-3"></i>Tempo por Fase</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between"><span>Fase 1 - Conex√£o:</span><span class="font-semibold text-green-600">1 min</span></div>
                        <div class="flex justify-between"><span>Fase 2 - Precis√£o:</span><span class="font-semibold text-blue-600">12 min</span></div>
                        <div class="flex justify-between"><span>Fase 3 - Integra√ß√£o:</span><span class="font-semibold text-purple-600">2 min</span></div>
                        <hr class="my-2"><div class="flex justify-between text-lg font-bold"><span>Total:</span><span class="text-indigo-600">15 minutos</span></div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4"><i class="fas fa-bullseye text-red-500 mr-3"></i>Objetivos da Aula</h4>
                    <ul class="space-y-2">
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>Otimizar a via neuro-motora</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>Melhorar o deslizamento neural</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>Aliviar tens√£o em olhos e punhos</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>Aumentar a precis√£o do movimento</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        let audioContext = null;
        let backgroundMusicOscillator = null;
        let backgroundMusicGain = null;
        let musicPlaying = false;
        let musicVolume = 0.05;
        let audioInitialized = false;
        
        let backgroundMusicElement, startSoundElement, endSoundElement;
        
        let timers = {};
        let currentExercise = -1;
        const totalExercises = 12;
        let completedExercises = 0;
        
        const exerciseDurations = [60, 75, 75, 75, 75, 75, 75, 60, 75, 75, 60, 120];
        
        const musicFrequencies = [220, 277.18, 329.63, 440, 554.37, 659.25];
        
        function initializeAudio() {
            if (audioInitialized) return;
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) { console.log('Web Audio API not available'); }
            
            backgroundMusicElement = document.getElementById('backgroundMusic');
            startSoundElement = document.getElementById('startSound');
            endSoundElement = document.getElementById('endSound');
            
            if (backgroundMusicElement) backgroundMusicElement.volume = musicVolume;
            if (startSoundElement) startSoundElement.volume = 0.3;
            if (endSoundElement) endSoundElement.volume = 0.3;
            
            audioInitialized = true;
            if (isIOS) document.getElementById('iosAudioBanner').classList.remove('show');
        }
        
        function activateAudioForIOS() {
            initializeAudio();
            if (audioContext && audioContext.state === 'suspended') audioContext.resume();
            if (backgroundMusicElement) backgroundMusicElement.play().then(() => { backgroundMusicElement.pause(); backgroundMusicElement.currentTime = 0; });
            document.getElementById('iosAudioBanner').classList.remove('show');
            showSoundIndicator('√Åudio Ativado', 'music');
        }
        
        function createBackgroundMusic() {
            if (!audioContext || backgroundMusicOscillator) return false;
            try {
                backgroundMusicGain = audioContext.createGain();
                backgroundMusicGain.connect(audioContext.destination);
                backgroundMusicGain.gain.setValueAtTime(musicVolume, audioContext.currentTime);
                const oscillators = [];
                musicFrequencies.forEach(freq => {
                    const osc = audioContext.createOscillator();
                    const gain = audioContext.createGain();
                    osc.frequency.setValueAtTime(freq * 0.5, audioContext.currentTime);
                    osc.type = 'sine';
                    gain.gain.setValueAtTime(0.1 / musicFrequencies.length, audioContext.currentTime);
                    osc.connect(gain);
                    gain.connect(backgroundMusicGain);
                    osc.start();
                    oscillators.push(osc);
                });
                backgroundMusicOscillator = oscillators;
                return true;
            } catch (e) { return false; }
        }
        
        function toggleBackgroundMusic() {
            if (!audioInitialized) initializeAudio();
            const musicBtn = document.getElementById('musicBtn');
            if (!musicPlaying) {
                let musicStarted = createBackgroundMusic();
                if (!musicStarted && backgroundMusicElement) {
                    backgroundMusicElement.play().then(() => { musicStarted = true; });
                }
                if (musicStarted || backgroundMusicOscillator) {
                    musicPlaying = true;
                    musicBtn.innerHTML = '<i class="fas fa-pause mr-2"></i>Pausar';
                    showSoundIndicator('M√∫sica Iniciada', 'music');
                }
            } else {
                if (backgroundMusicOscillator) {
                    backgroundMusicOscillator.forEach(osc => { try { osc.stop(); } catch (e) {} });
                    backgroundMusicOscillator = null;
                }
                if (backgroundMusicElement) { backgroundMusicElement.pause(); backgroundMusicElement.currentTime = 0; }
                musicPlaying = false;
                musicBtn.innerHTML = '<i class="fas fa-music mr-2"></i>M√∫sica';
                showSoundIndicator('M√∫sica Pausada', 'music');
            }
        }
        
        function adjustVolume(delta) {
            musicVolume = Math.max(0, Math.min(0.3, musicVolume + delta));
            if (backgroundMusicGain) backgroundMusicGain.gain.setValueAtTime(musicVolume, audioContext.currentTime);
            if (backgroundMusicElement) backgroundMusicElement.volume = musicVolume;
            showSoundIndicator(`Volume: ${Math.round(musicVolume * 100)}%`, 'music');
        }
        
        function playSound(frequency, duration, type = 'sine') {
            if (!audioInitialized) return;
            if (audioContext && audioContext.state !== 'suspended') {
                try {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    oscillator.frequency.value = frequency;
                    oscillator.type = type;
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + duration);
                    return;
                } catch (e) {}
            }
            const soundElement = frequency > 700 ? startSoundElement : endSoundElement;
            if (soundElement) { soundElement.currentTime = 0; soundElement.play(); }
        }
        
        function playStartSound() { playSound(800, 0.2); setTimeout(() => playSound(1000, 0.3), 100); showSoundIndicator('Iniciando Exerc√≠cio', 'start'); }
        function playEndSound() { playSound(600, 0.2); setTimeout(() => playSound(400, 0.3), 100); showSoundIndicator('Exerc√≠cio Finalizado', 'end'); }
        function playWarningSound() { playSound(1200, 0.1); }
        
        function showSoundIndicator(text, type) {
            const indicator = document.getElementById('soundIndicator');
            const soundText = document.getElementById('soundText');
            soundText.textContent = text;
            indicator.className = `sound-indicator show ${type}`;
            setTimeout(() => indicator.classList.remove('show'), 2000);
        }
        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        function updateTimerDisplay(exerciseId, timeLeft) {
            const timerElement = document.getElementById(`timer-${exerciseId}`);
            if (!timerElement) return;
            timerElement.textContent = formatTime(timeLeft);
            timerElement.classList.remove('active', 'warning', 'danger');
            if (timeLeft <= 5) timerElement.classList.add('danger');
            else if (timeLeft <= 10) timerElement.classList.add('warning');
            else timerElement.classList.add('active');
        }
        
        function startExerciseTimer(exerciseId, duration) {
            if (!audioInitialized) initializeAudio();
            if (timers[exerciseId]) clearInterval(timers[exerciseId]);
            let timeLeft = duration;
            currentExercise = exerciseId;
            document.querySelectorAll('.exercise-card').forEach(card => card.classList.remove('active'));
            document.getElementById(`exercise-${exerciseId}`).classList.add('active');
            playStartSound();
            updateTimerDisplay(exerciseId, timeLeft);
            
            timers[exerciseId] = setInterval(() => {
                timeLeft--;
                updateTimerDisplay(exerciseId, timeLeft);
                if (timeLeft === 10) playWarningSound();
                if (timeLeft <= 0) {
                    clearInterval(timers[exerciseId]);
                    delete timers[exerciseId];
                    playEndSound();
                    document.getElementById(`exercise-${exerciseId}`).classList.remove('active');
                    completedExercises++;
                    updateProgress();
                    
                    if (currentExercise >= 0 && exerciseId < totalExercises - 1) {
                        setTimeout(() => startExerciseTimer(exerciseId + 1, exerciseDurations[exerciseId + 1]), 2000);
                    } else if (exerciseId === totalExercises - 1) {
                        showSoundIndicator('Aula Finalizada!', 'end');
                        currentExercise = -1;
                    }
                }
            }, 1000);
        }
        
        function pauseExerciseTimer(exerciseId) {
            if (timers[exerciseId]) {
                clearInterval(timers[exerciseId]);
                delete timers[exerciseId];
                document.getElementById(`exercise-${exerciseId}`).classList.remove('active');
                showSoundIndicator('Exerc√≠cio Pausado', 'end');
            }
        }
        
        function startAllTimers() {
            if (!audioInitialized) initializeAudio();
            resetAllTimers(false); // Soft reset without message
            completedExercises = 0;
            updateProgress();
            startExerciseTimer(0, exerciseDurations[0]);
            showSoundIndicator('Iniciando Aula Completa', 'start');
        }
        
        function pauseAllTimers() {
            Object.keys(timers).forEach(id => pauseExerciseTimer(parseInt(id)));
            currentExercise = -1;
            showSoundIndicator('Todos os Timers Pausados', 'end');
        }
        
        function resetAllTimers(showMessage = true) {
            pauseAllTimers();
            exerciseDurations.forEach((duration, index) => {
                const timerElement = document.getElementById(`timer-${index}`);
                if(timerElement) {
                    timerElement.textContent = formatTime(duration);
                    timerElement.classList.remove('active', 'warning', 'danger');
                }
            });
            completedExercises = 0;
            updateProgress();
            if(showMessage) showSoundIndicator('Todos os Timers Reiniciados', 'music');
        }
        
        function updateProgress() {
            const progressPercent = (completedExercises / totalExercises) * 100;
            document.getElementById('progressBar').style.width = `${progressPercent}%`;
            document.getElementById('progressText').textContent = `${Math.round(progressPercent)}%`;
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            if (isIOS) {
                setTimeout(() => document.getElementById('iosAudioBanner').classList.add('show'), 1000);
            } else {
                initializeAudio();
            }
        });
    </script>
</body>
</html>
